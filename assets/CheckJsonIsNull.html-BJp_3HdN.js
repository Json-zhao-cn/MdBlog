import{_ as s,c as a,b as e,o}from"./app-zJ4cJcQp.js";const t={};function p(l,n){return o(),a("div",null,[...n[0]||(n[0]=[e(`<h2 id="using-groovy-to-check-json-is-null-or-not" tabindex="-1"><a class="header-anchor" href="#using-groovy-to-check-json-is-null-or-not"><span>Using groovy to check Json is null or not</span></a></h2><h3 id="_1-scenario" tabindex="-1"><a class="header-anchor" href="#_1-scenario"><span>1. <strong>Scenario</strong></span></a></h3><p>In the Apache NIFI context, when we get respond Json from <code>InvokeHTTP</code> or convertJson from <code>ExecutedSQL</code>. We need to check json data is null or not.Most of time, we will use some attributes like <code>execute.sql.count</code> to check json. However,sometimes, we can not judge json is null or not directly.According this situation, we can use groovy script to do it.</p><h3 id="_2-solution" tabindex="-1"><a class="header-anchor" href="#_2-solution"><span>2. <strong>Solution</strong></span></a></h3><p>If we want to next process after <code>checkJsonIsNull</code>, that is mean we need to deal with Json is null situation, we can use a customer attribute field like<code>IsQueueNull</code> to do it. If we do not want to deal with next process, we can throw the <code>Exception</code> directly. You can choose different logic code based on your business.</p><div class="language-groovy line-numbers-mode" data-highlighter="prismjs" data-ext="groovy" data-title="groovy"><pre><code><span class="line"><span class="token comment">//checkJsonIsNull</span></span>
<span class="line"><span class="token keyword">import</span> groovy<span class="token punctuation">.</span>json<span class="token punctuation">.</span>JsonSlurper</span>
<span class="line"><span class="token keyword">import</span> java<span class="token punctuation">.</span>nio<span class="token punctuation">.</span>charset<span class="token punctuation">.</span>StandardCharsets</span>
<span class="line"></span>
<span class="line"><span class="token keyword">def</span> flowFile <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>flowFile<span class="token punctuation">)</span> <span class="token keyword">return</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">def</span> jsonText <span class="token operator">=</span> <span class="token interpolation-string"><span class="token string">&quot;&quot;</span></span></span>
<span class="line">session<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span>flowFile<span class="token punctuation">,</span> <span class="token punctuation">{</span> inputStream <span class="token operator">-&gt;</span></span>
<span class="line">    jsonText <span class="token operator">=</span> inputStream<span class="token punctuation">.</span><span class="token function">getText</span><span class="token punctuation">(</span>StandardCharsets<span class="token punctuation">.</span>UTF_8<span class="token punctuation">.</span><span class="token function">name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span> <span class="token keyword">as</span> InputStreamCallback<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">def</span> isQueueNull <span class="token operator">=</span> <span class="token boolean">false</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>jsonText<span class="token operator">?.</span><span class="token function">trim</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        isQueueNull <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">def</span> jsonData <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">JsonSlurper</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parseText</span><span class="token punctuation">(</span>jsonText<span class="token punctuation">)</span></span>
<span class="line">        </span>
<span class="line">        <span class="token comment">// null map list</span></span>
<span class="line">        isQueueNull <span class="token operator">=</span> <span class="token punctuation">(</span>jsonData <span class="token operator">==</span> null <span class="token operator">||</span> </span>
<span class="line">                      <span class="token punctuation">(</span>jsonData <span class="token keyword">instanceof</span> <span class="token class-name">List</span> <span class="token operator">&amp;&amp;</span> jsonData<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">||</span> </span>
<span class="line">                      <span class="token punctuation">(</span>jsonData <span class="token keyword">instanceof</span> <span class="token class-name">Map</span> <span class="token operator">&amp;&amp;</span> jsonData<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>Exception e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    isQueueNull <span class="token operator">=</span> <span class="token boolean">true</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line">flowFile <span class="token operator">=</span> session<span class="token punctuation">.</span><span class="token function">putAttribute</span><span class="token punctuation">(</span>flowFile<span class="token punctuation">,</span> <span class="token interpolation-string"><span class="token string">&quot;IsQueueNull&quot;</span></span><span class="token punctuation">,</span> isQueueNull <span class="token operator">?</span> <span class="token interpolation-string"><span class="token string">&quot;true&quot;</span></span> <span class="token punctuation">:</span> <span class="token interpolation-string"><span class="token string">&quot;false&quot;</span></span><span class="token punctuation">)</span></span>
<span class="line">session<span class="token punctuation">.</span><span class="token function">transfer</span><span class="token punctuation">(</span>flowFile<span class="token punctuation">,</span> REL_SUCCESS<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,6)])])}const i=s(t,[["render",p]]),u=JSON.parse('{"path":"/blogs/ETL/AppacheNIFI/Groovy/CheckJsonIsNull.html","title":"Using groovy to check Json is null or not","lang":"en-US","frontmatter":{"title":"Using groovy to check Json is null or not","date":"2025/11/15","tags":["ApacheNIFI"],"categories":["ETL"]},"headers":[{"level":2,"title":"Using groovy to check Json is null or not","slug":"using-groovy-to-check-json-is-null-or-not","link":"#using-groovy-to-check-json-is-null-or-not","children":[{"level":3,"title":"1. Scenario","slug":"_1-scenario","link":"#_1-scenario","children":[]},{"level":3,"title":"2. Solution","slug":"_2-solution","link":"#_2-solution","children":[]}]}],"git":{"createdTime":1764047965000,"updatedTime":1764047965000,"contributors":[{"name":"jsonzhao","email":"json.zhao.cn@outlook.com","commits":1}]},"filePathRelative":"blogs/ETL/AppacheNIFI/Groovy/CheckJsonIsNull.md"}');export{i as comp,u as data};
